
# cp_config
# copy configuration files to PDBA_HOME

use File::Spec;
use File::Copy;
use File::Path;

open(MFST,"MANIFEST") || die "Cannot open MANIFEST file.  Is it missing? - $!\n";

my $pdbaHome = 
	defined($ENV{PDBA_HOME}) 
	? $ENV{PDBA_HOME} 
	: qq{$ENV{HOME}/pdba};

mkpath([$pdbaHome],0,0700);

print "Placing config files in  $pdbaHome\n";

my @conf = grep(/\.conf$/, <MFST>);
close MFST;
chomp @conf;

for my $cfile ( @conf ) {
	my ( undef, $dir, $file ) = File::Spec->splitpath($cfile);
	next if $file =~ /^test/; # skip conf files used in testing
	my $newFile = File::Spec->catfile($pdbaHome, $file);
	print "copying $file to $newFile\n";
	copy($cfile, $newFile);
	chmod 0600, $newFile;
}


